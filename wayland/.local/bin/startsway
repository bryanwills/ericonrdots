#!/bin/sh

# created by elogind, usually
if test -z "${XDG_RUNTIME_DIR}"; then
	export XDG_RUNTIME_DIR=/tmp/${UID}-runtime-dir
	if ! test -d "${XDG_RUNTIME_DIR}"; then
		mkdir "${XDG_RUNTIME_DIR}"
		chmod 0700 "${XDG_RUNTIME_DIR}"
	fi
fi

export XDG_SESSION_TYPE=wayland

# start the compositor itself
WLR_DRM_DEVICES=/dev/dri/card0 exec dbus-run-session \
	sway --my-next-gpu-wont-be-nvidia -d -V 2>&1 \
	> "${XDG_RUNTIME_DIR}/sway-$(date "+%Y-%m-%d").log"
